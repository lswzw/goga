# GoGa 配置文件示例

# 服务监听配置
server:
  port: "8080"
  # 生产环境请务必配置 TLS 证书以启用 HTTPS
  # 例如: "/path/to/cert.pem"
  tls_cert_path: "" 
  # 例如: "/path/to/key.pem"
  tls_key_path: ""

# 后端真实业务应用的地址
backend_url: "http://localhost:3000"

# WebSocket 代理相关配置
websocket:
  # 允许连接到此代理的来源域列表。
  # 支持 "*" (允许所有来源)，但为了安全，生产环境建议使用精确域名。
  # 例如: ["https://my-app.com", "https://another-app.com"]
  allowed_origins:
    - "*"
    # - "https://your-frontend.com"
  # 是否跳过后端 TLS 证书验证。生产环境中请务必设置为 'false' 或删除此项以启用验证。
  insecure_skip_verify: false

# 加密相关配置
encryption:
  # 全局开关，false 则退化为纯反向代理，可用于调试
  enabled: true
  # 【新增】服务器端强制加密的 API 路由列表。
  # 匹配此列表的请求，如果不是合法的加密格式，将被服务器拒绝。
  # 支持 Go 的正则表达式。
  must_encrypt_routes:
    # - "^/api/v1/user/profile$"  # 精确匹配 /api/v1/user/profile
    # - "^/api/v1/sensitive/.*"   # 匹配所有 /api/v1/sensitive/ 开头的路径

# 密钥缓存配置
key_cache:
  # 缓存类型: "in-memory" (默认, 单副本适用) 或 "redis" (多副本适用)
  type: "in-memory" # 或 "redis"
  # 一次性密钥在服务端的缓存时间（秒）
  ttl_seconds: 300
  redis:
    # Redis 服务器地址 (e.g., "localhost:6379", "redis:6379")
    addr: "localhost:6379"
    # Redis 密码 (如果配置了密码)
    password: ""
    # Redis 数据库索引
    db: 0

# 脚本注入配置
script_injection:
  # 要注入到 HTML 页面 </body> 标签之前的 HTML 代码。
  # 默认会注入一个指向 /goga.min.js 的脚本标签。
  script_content: '<script src="/goga.min.js" defer></script>'

# 日志配置
log:
  # 日志级别 (可选项: debug, info, warn, error)
  level: "info"
  # 日志输出路径列表，可以配置多个输出
  # 可选项: "stdout" (标准输出), "stderr" (标准错误), 或一个具体的文件路径 (例如, "/var/log/goga.log")
  output_paths:
    - "stdout"
    # - "/var/log/goga.log"
